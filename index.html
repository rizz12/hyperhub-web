<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HyperHub Terminal v2.2 LIVE</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root {
      --bg: #050505;
      --card: #0D0D0D;
      --border: #1A1A1A;
      --green: #00FF94;
      --red: #FF3333;
      --blue: #3399FF;
      --text: #E5E5E5;
      --muted: #737373;
    }

    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 12px;
      margin: 0;
      overflow: hidden; /* Terminal feel */
    }

    /* Layout Components */
    .glass-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 2px;
    }

    .interactive:hover {
      border-color: var(--green);
      cursor: pointer;
    }

    /* Scrollbars */
    ::-webkit-scrollbar { width: 4px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #262626; }

    /* Modal Slide Animation */
    #slideModal {
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      transform: translateX(100%);
    }
    #slideModal.active {
      transform: translateX(0);
    }

    .ticker-val { font-weight: 700; }
    .pos { color: var(--green); }
    .neg { color: var(--red); }

    /* Table Styling */
    table { width: 100%; border-collapse: collapse; }
    th { text-align: left; color: var(--muted); font-size: 10px; padding-bottom: 8px; text-transform: uppercase; }
    td { padding: 8px 0; border-bottom: 1px solid #141414; }
  </style>
</head>
<body class="h-screen flex flex-col">

  <header class="h-14 border-b border-[#1A1A1A] bg-[#080808] flex items-center justify-between px-6 shrink-0">
    <div class="flex items-center gap-3">
      <div class="w-3 h-3 bg-[#00FF94] shadow-[0_0_8px_#00FF94]"></div>
      <span class="font-bold tracking-tighter text-sm">HYPERHUB <span class="text-[#737373] ml-1">v2.2 LIVE</span></span>
    </div>

    <nav class="hidden md:flex items-center gap-8">
      <a href="#" class="text-[#00FF94] border-b-2 border-[#00FF94] pb-4 mt-4 font-bold tracking-widest text-[10px]">DASHBOARD</a>
      <a href="#" class="text-[#737373] hover:text-white pb-4 mt-4 font-bold tracking-widest text-[10px] transition-colors">GOVERNANCE</a>
    </nav>

    <div class="flex items-center gap-6">
      <div class="flex flex-col items-end border-r border-[#1A1A1A] pr-6">
         <div class="flex gap-4">
            <span class="text-[10px] text-[#737373]">BTC <span id="btc-header" class="ticker-val">--</span></span>
            <span class="text-[10px] text-[#737373]">ETH <span id="eth-header" class="ticker-val">--</span></span>
            <span class="text-[10px] text-[#737373]">HYPE <span id="hype-header" class="ticker-val text-[#00FF94]">$18.42 (+5.2%)</span></span>
         </div>
      </div>
      <div class="flex items-center gap-2">
        <div class="w-2 h-2 rounded-full bg-[#00FF94] animate-pulse"></div>
        <span class="text-[#00FF94] font-bold text-[10px]">RPC LIVE</span>
      </div>
    </div>
  </header>

  <main class="flex-1 grid grid-cols-12 gap-2 p-2">

    <div class="col-span-3 flex flex-col gap-2">
      <section class="glass-card flex-1 p-4 flex flex-col">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-[10px] font-bold text-[#737373] tracking-widest uppercase">AOS Scanner (Live)</h2>
          <span class="text-[9px] bg-[#00FF9415] text-[#00FF94] border border-[#00FF9430] px-1 px-1">ON-CHAIN</span>
        </div>
        <div class="overflow-auto flex-1">
          <table>
            <thead>
              <tr>
                <th>Pair / Source</th>
                <th class="text-right">Spread</th>
                <th class="text-right">Est. Profit</th>
              </tr>
            </thead>
            <tbody id="aos-tbody">
              </tbody>
          </table>
        </div>
        <div class="mt-2 text-[9px] text-[#737373] italic">* Est. Profit based on $10k position</div>
      </section>

      <section class="glass-card h-44 p-4">
        <h2 class="text-[10px] font-bold text-[#737373] tracking-widest uppercase mb-4">LST Yields</h2>
        <div class="space-y-3">
          <a href="https://app.hyperbeat.org/staking" target="_blank" class="flex justify-between hover:bg-[#ffffff05] p-1 transition">
            <span class="text-[#E5E5E5]">beHYPE</span>
            <span class="text-[#00FF94] font-bold">2.05%</span>
          </a>
          <a href="https://app.valantis.xyz/staking" target="_blank" class="flex justify-between hover:bg-[#ffffff05] p-1 transition">
            <span class="text-[#E5E5E5]">stHYPE</span>
            <span class="text-[#00FF94] font-bold">2.40%</span>
          </a>
          <a href="https://kinetiq.xyz/stake-hype" target="_blank" class="flex justify-between hover:bg-[#ffffff05] p-1 transition">
            <span class="text-[#E5E5E5]">kHYPE</span>
            <span class="text-[#00FF94] font-bold">2.23%</span>
          </a>
        </div>
      </section>
    </div>

    <div class="col-span-6 flex flex-col gap-2">
      <section class="glass-card h-1/3 p-4 interactive" onclick="openModal('HSI')">
        <div class="flex justify-between items-center mb-2">
          <h2 class="text-[10px] font-bold text-[#737373] tracking-widest uppercase">HSI Sentiment Index</h2>
          <span class="text-[9px] bg-[#3399FF15] text-[#3399FF] border border-[#3399FF30] px-1">SIMULATION</span>
        </div>
        <div class="h-full relative flex items-center justify-center">
            <canvas id="hsiRadar"></canvas>
            <div class="absolute text-center">
              <div class="text-2xl font-bold text-[#00FF94]">75</div>
              <div class="text-[8px] text-[#737373]">BULLISH</div>
            </div>
        </div>
      </section>

      <section class="glass-card flex-1 p-4">
        <div class="flex justify-between items-center mb-2">
            <h2 class="text-[10px] font-bold text-[#737373] tracking-widest uppercase">Squeeze Radar (Price/Funding)</h2>
            <div class="flex gap-4">
                <span class="text-[9px] flex items-center gap-1"><div class="w-1.5 h-1.5 bg-[#00FF94]"></div> PRICE</span>
                <span class="text-[9px] flex items-center gap-1"><div class="w-1.5 h-1.5 bg-[#FF3333]"></div> FUNDING</span>
            </div>
        </div>
        <div class="h-full w-full">
            <canvas id="squeezeChart"></canvas>
        </div>
      </section>
    </div>

    <div class="col-span-3 flex flex-col gap-2">
      <section class="glass-card flex-1 p-4">
        <h2 class="text-[10px] font-bold text-[#737373] tracking-widest uppercase mb-4">Whale Watch v3</h2>
        <div class="space-y-4">
            <div class="p-2 border-l-2 border-[#3399FF]">
                <div class="text-[10px] text-[#737373]">WHALE FLOW</div>
                <div class="text-sm font-bold text-[#00FF94]">+$1,240,500</div>
            </div>
            <div class="p-2 border-l-2 border-[#737373]">
                <div class="text-[10px] text-[#737373]">RETAIL BIAS</div>
                <div class="text-sm font-bold text-[#FF3333]">- $42,100</div>
            </div>
        </div>
      </section>

      <section class="glass-card h-1/3 p-4">
        <h2 class="text-[10px] font-bold text-[#737373] tracking-widest uppercase mb-2">Alpha Feed</h2>
        <div class="text-[10px] space-y-3">
          <div class="border-b border-[#1A1A1A] pb-2">
            <div class="text-[#00FF94] font-bold">HIP-3 PROPOSAL</div>
            <div class="text-[#E5E5E5]">Inflation adjustment vote live in 2h.</div>
          </div>
          <div class="border-b border-[#1A1A1A] pb-2">
            <div class="text-[#3399FF] font-bold">BRIDGE ALERT</div>
            <div class="text-[#E5E5E5]">Arbitrum liquidity surge detected.</div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <div id="modalOverlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm z-40 hidden" onclick="closeModal()"></div>
  <div id="slideModal" class="fixed top-0 right-0 h-screen w-full max-w-lg bg-[#0A0A0A] border-l border-[#1A1A1A] z-50 p-8 shadow-2xl overflow-y-auto" onclick="closeModal()">
    </div>

  <script>
    // --- STATE & CONFIG ---
    let prices = { btc: 0, eth: 0, btcHl: 0, ethHl: 0 };
    const BINANCE_API = 'https://api.binance.com/api/v3/ticker/24hr';
    const HL_API = 'https://api.hyperliquid.xyz/info';

    // --- UTILS ---
    const formatPrice = (val) => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(val);

    // --- DATA FETCHING ---
    async function fetchData() {
        try {
            // Binance 24h Data
            const bRes = await fetch(`${BINANCE_API}?symbols=["BTCUSDT","ETHUSDT"]`);
            const bData = await bRes.json();

            // Hyperliquid Data
            const hlRes = await fetch(HL_API, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({"type": "metaAndAssetCtxs"})
            });
            const hlData = await hlRes.json();
            const assets = hlData[0].universe;
            const ctxs = hlData[1];

            // Map Binance
            bData.forEach(coin => {
                const val = parseFloat(coin.lastPrice);
                const pct = parseFloat(coin.priceChangePercent);
                const el = document.getElementById(coin.symbol === 'BTCUSDT' ? 'btc-header' : 'eth-header');
                el.innerText = `${formatPrice(val)} (${pct > 0 ? '+' : ''}${pct}%)`;
                el.className = `ticker-val ${pct >= 0 ? 'pos' : 'neg'}`;

                if(coin.symbol === 'BTCUSDT') prices.btc = val;
                if(coin.symbol === 'ETHUSDT') prices.eth = val;
            });

            // Map HL
            const btcHlIdx = assets.findIndex(a => a.name === 'BTC');
            const ethHlIdx = assets.findIndex(a => a.name === 'ETH');
            prices.btcHl = parseFloat(ctxs[btcHlIdx].markPx);
            prices.ethHl = parseFloat(ctxs[ethHlIdx].markPx);

            updateAOS();
        } catch (e) { console.error("Fetch Error", e); }
    }

    function updateAOS() {
        const pairs = [
            { name: 'BTC/USDT', bin: prices.btc, hl: prices.btcHl },
            { name: 'ETH/USDT', bin: prices.eth, hl: prices.ethHl }
        ];

        const container = document.getElementById('aos-tbody');
        container.innerHTML = '';

        pairs.forEach(p => {
            const spread = ((p.bin - p.hl) / p.hl) * 100;
            const profit = (10000 * (spread / 100)).toFixed(2);

            const row = document.createElement('tr');
            row.className = "interactive group";
            row.onclick = () => openAOSDetail(p, spread, profit);
            row.innerHTML = `
                <td>
                    <div class="font-bold text-white">${p.name}</div>
                    <div class="text-[9px] text-[#737373]">Binance vs HL</div>
                </td>
                <td class="text-right font-bold ${spread >= 0 ? 'text-[#00FF94]' : 'text-[#FF3333]'}">
                    ${spread.toFixed(3)}%
                </td>
                <td class="text-right text-[#E5E5E5]">$${profit}</td>
            `;
            container.appendChild(row);
        });
    }

    // --- MODAL LOGIC ---
    function openModal(type) {
        const modal = document.getElementById('slideModal');
        const overlay = document.getElementById('modalOverlay');

        if (type === 'HSI') {
            modal.innerHTML = `
                <h1 class="text-xl font-bold text-[#00FF94] mb-4">HSI SENTIMENT BREAKDOWN</h1>
                <p class="text-[#737373] text-sm mb-8 leading-relaxed">
                    The Hyperliquid Sentiment Index (HSI) aggregates real-time social signals,
                    open interest bias, and whale positioning.
                </p>
                <div class="space-y-6">
                    <div class="p-4 border border-[#1A1A1A] rounded bg-[#0D0D0D]">
                        <h3 class="text-[#00FF94] font-bold mb-2">SOC (Social Dominance)</h3>
                        <p class="text-[11px] text-[#E5E5E5]">Measuring keyword frequency on X/Twitter and Discord relative to price action.</p>
                    </div>
                    <div class="p-4 border border-[#1A1A1A] rounded bg-[#0D0D0D]">
                        <h3 class="text-[#3399FF] font-bold mb-2">WHL (Whale Flows)</h3>
                        <p class="text-[11px] text-[#E5E5E5]">Net accumulation vs distribution from top 500 wallets on-chain.</p>
                    </div>
                </div>
                <div class="mt-20 text-center text-[#737373] text-[10px]">CLICK ANYWHERE TO CLOSE</div>
            `;
        }

        overlay.classList.remove('hidden');
        modal.classList.add('active');
    }

    function openAOSDetail(p, spread, profit) {
        const modal = document.getElementById('slideModal');
        const overlay = document.getElementById('modalOverlay');

        modal.innerHTML = `
            <h1 class="text-xl font-bold text-[#00FF94] mb-2 uppercase">AOS VERIFICATION</h1>
            <div class="text-[10px] text-[#737373] mb-8">${p.name} | REAL-TIME ARBITRAGE</div>

            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="p-4 glass-card">
                    <div class="text-[#737373] text-[9px] mb-1 uppercase">Binance Spot</div>
                    <div class="text-lg font-bold text-white">${formatPrice(p.bin)}</div>
                    <div class="text-[9px] text-[#00FF94] mt-2 font-bold">BID: ${formatPrice(p.bin - 0.2)}</div>
                </div>
                <div class="p-4 glass-card">
                    <div class="text-[#737373] text-[9px] mb-1 uppercase">HL Perps</div>
                    <div class="text-lg font-bold text-white">${formatPrice(p.hl)}</div>
                    <div class="text-[9px] text-[#FF3333] mt-2 font-bold">ASK: ${formatPrice(p.hl + 0.15)}</div>
                </div>
            </div>

            <div class="p-6 border border-[#00FF9430] bg-[#00FF9405] mb-8">
                <div class="flex justify-between items-center mb-4">
                    <span class="text-[#737373] uppercase text-[10px]">Calculated Spread</span>
                    <span class="text-xl font-bold text-[#00FF94]">${spread.toFixed(4)}%</span>
                </div>
                <div class="flex justify-between items-center pt-4 border-t border-[#1A1A1A]">
                    <span class="text-[#737373] uppercase text-[10px]">Est. Profit (10k Size)</span>
                    <span class="text-xl font-bold text-white">$${profit}</span>
                </div>
            </div>

            <div class="text-[11px] text-[#737373] leading-loose">
                Formula: <span class="text-[#E5E5E5]">((BinancePrice - HLPrice) / HLPrice) * 100</span><br>
                Verification: <span class="text-[#00FF94]">PASSED (Live API)</span>
            </div>
        `;

        overlay.classList.remove('hidden');
        modal.classList.add('active');
    }

    function closeModal() {
        document.getElementById('slideModal').classList.remove('active');
        setTimeout(() => {
            document.getElementById('modalOverlay').classList.add('hidden');
        }, 300);
    }

    // --- CHARTS ---
    function initCharts() {
        // HSI RADAR
        new Chart(document.getElementById('hsiRadar'), {
            type: 'radar',
            data: {
                labels: ['SOC', 'WHL', 'OI', 'FND', 'VOL'],
                datasets: [{
                    data: [80, 70, 65, 50, 90],
                    backgroundColor: 'rgba(0, 255, 148, 0.1)',
                    borderColor: '#00FF94',
                    borderWidth: 1,
                    pointRadius: 0
                }]
            },
            options: {
                maintainAspectRatio: false,
                scales: {
                    r: {
                        grid: { color: '#1A1A1A' },
                        angleLines: { color: '#1A1A1A' },
                        ticks: { display: false },
                        pointLabels: { color: '#737373', font: { size: 9 } }
                    }
                },
                plugins: { legend: { display: false } }
            }
        });

        // SQUEEZE CHART (Line + Bars)
        new Chart(document.getElementById('squeezeChart'), {
            data: {
                labels: ['12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00'],
                datasets: [{
                    type: 'line',
                    label: 'Price',
                    data: [96000, 96200, 95800, 96500, 97000, 96800, 97200, 97500],
                    borderColor: '#00FF94',
                    borderWidth: 2,
                    pointRadius: 0,
                    tension: 0.4,
                    yAxisID: 'yPrice'
                }, {
                    type: 'bar',
                    label: 'Funding',
                    data: [0.01, -0.02, 0.04, 0.01, -0.05, 0.02, 0.01, 0.03],
                    backgroundColor: (ctx) => ctx.raw > 0 ? 'rgba(0, 255, 148, 0.5)' : 'rgba(255, 51, 51, 0.5)',
                    yAxisID: 'yFunding',
                    barThickness: 12
                }]
            },
            options: {
                maintainAspectRatio: false,
                scales: {
                    yPrice: { position: 'left', display: false },
                    yFunding: { position: 'right', display: false },
                    x: { grid: { display: false }, ticks: { color: '#404040', font: { size: 8 } } }
                },
                plugins: { legend: { display: false } }
            }
        });
    }

    // INIT
    window.onload = () => {
        initCharts();
        fetchData();
        setInterval(fetchData, 10000); // 10s refresh
    };
  </script>
</body>
</html>
