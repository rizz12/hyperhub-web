<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HyperHub Terminal v2.3</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --bg: #020617;
      --panel: #0B1221;
      --border: #1E293B;
      --text: #E2E8F0;
      --muted: #64748B;
      --green: #10B981;
      --red: #EF4444;
      --blue: #3B82F6;
    }
    body {
      background-color: var(--bg);
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      margin: 0;
      font-size: 13px;
    }
    .bento-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      padding: 12px;
      max-width: 1600px;
      margin: 0 auto;
    }
    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      transition: border-color 0.2s;
    }
    .card.interactive:hover { border-color: var(--green); cursor: pointer; }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      border-bottom: 1px solid var(--border);
      padding-bottom: 8px;
    }
    .card-title {
      font-size: 10px;
      font-weight: 700;
      color: var(--muted);
      text-transform: uppercase;
    }
    .badge {
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 2px;
      font-weight: 700;
    }
    .badge-onchain { background: rgba(16, 185, 129, 0.1); color: var(--green); border: 1px solid rgba(16, 185, 129, 0.2); }
    .badge-sim { background: rgba(59, 130, 246, 0.1); color: var(--blue); border: 1px solid rgba(59, 130, 246, 0.2); }
    .terminal-table {
      width: 100%;
      font-size: 12px;
      border-collapse: collapse;
    }
    .terminal-table th {
      text-align: left;
      color: var(--muted);
      padding-bottom: 8px;
      font-size: 10px;
    }
    .terminal-table td {
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }
    /* Modal with fade-in zoom animation */
    #chartModal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      backdrop-filter: blur(5px);
      opacity: 0;
      transform: scale(0.8);
      transition: opacity 0.3s ease, transform 0.3s ease;
    }
    #chartModal.open {
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
      transform: scale(1);
    }
    .modal-container {
      background: var(--panel);
      border: 1px solid var(--border);
      max-width: 900px;
      width: 95%;
      height: 550px;
      display: flex;
      border-radius: 8px;
      overflow: hidden;
    }
    canvas { width: 100% !important; height: 100% !important; }
    .link-hover:hover {
      color: var(--green);
      text-decoration: underline;
    }
    .dropdown {
      position: relative;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 4px;
      padding: 8px 0;
      z-index: 1000;
    }
    .dropdown-content a {
      display: block;
      padding: 6px 16px;
      text-decoration: none;
      color: var(--text);
      font-size: 11px;
      transition: background 0.2s;
    }
    .dropdown-content a:hover {
      background: var(--green);
      color: #000;
    }
    .dropdown:hover .dropdown-content {
      display: block;
    }
  </style>
</head>
<body>

  <!-- HEADER (exact match to screenshot: HYPERHUB v2.3 left, DASHBOARD GOVERNANCE center, tickers BTC ETH HYPE middle-right, RPC dropdown right) -->
  <nav class="border-b border-slate-800 p-4 flex items-center justify-between bg-[#020617]">
    <div class="flex items-center gap-6">
      <div class="flex items-center gap-2">
        <div class="w-3 h-3 bg-emerald-500"></div>
        <span class="font-bold">HYPERHUB v2.3</span>
      </div>
      <div class="flex gap-4 text-[11px] font-bold">
        <a href="#" class="text-emerald-400">DASHBOARD</a>
        <a href="#" class="text-slate-400 hover:text-white uppercase" onclick="openModal('GOVERNANCE')">GOVERNANCE</a>
      </div>
    </div>
    <div class="flex gap-4 text-xs font-mono">
      <span class="text-slate-500">HYPE: <span id="tick-hype" class="text-white">$30</span></span>
      <span class="text-slate-500">BTC: <span id="tick-btc" class="text-green-400">$96579 +2.1%</span></span>
      <span class="text-slate-500">ETH: <span id="tick-eth" class="text-red-400">$3312 -0.8%</span></span>
      <div class="dropdown">
        <span class="text-slate-500 hover:text-white cursor-pointer">Public RPC ↓</span>
        <div class="dropdown-content">
          <a href="https://rubynodes.io" target="_blank">Ruby Nodes RPC</a>
          <a href="https://rubynodes.io" target="_blank">Get Fast RPC</a>
        </div>
      </div>
    </div>
  </nav>

  <main class="bento-grid">
    <!-- AOS Scanner -->
    <div class="col-span-12 lg:col-span-4 card interactive" onclick="openModal('AOS')">
      <div class="card-header">
        <span class="card-title">AOS SCANNER (ARB)</span>
        <span class="badge badge-onchain">ON-CHAIN</span>
      </div>
      <table class="terminal-table">
        <thead><tr><th>PAIR / DEX</th><th class="text-right">SPREAD</th><th class="text-right">PROFIT ($10k)</th></tr></thead>
        <tbody>
          <tr>
            <td>HYPE/USDC <br><span class="text-[9px] text-slate-500">Aster vs HL</span></td>
            <td id="hype-spread" class="text-right font-bold text-emerald-400">0.51%</td>
            <td id="hype-profit" class="text-right">$125</td>
          </tr>
          <tr>
            <td>BTC/USDC <br><span class="text-[9px] text-slate-500">Aster vs HL</span></td>
            <td id="btc-spread" class="text-right font-bold text-emerald-400">0.12%</td>
            <td id="btc-profit" class="text-right">$840</td>
          </tr>
          <tr>
            <td>ETH/USDC <br><span class="text-[9px] text-slate-500">Lighter vs HL</span></td>
            <td id="eth-spread" class="text-right font-bold text-emerald-400">0.62%</td>
            <td id="eth-profit" class="text-right">$620</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- HSI Sentiment Index -->
    <div class="col-span-12 lg:col-span-4 card interactive" onclick="openModal('HSI')">
      <div class="card-header">
        <span class="card-title">HSI SENTIMENT INDEX</span>
        <span class="badge badge-sim">SIMULATION</span>
      </div>
      <div class="flex-1 min-h-[150px]">
        <canvas id="hsiRadar"></canvas>
      </div>
      <div class="mt-2 text-center text-xs text-emerald-400">75 / 100</div>
    </div>

    <!-- Whale Watch (exact like screenshot: TIER, NET FLOW bar, VALUE with 5 tiers) -->
    <div class="col-span-12 lg:col-span-4 card">
      <div class="card-header">
        <span class="card-title">WHALE WATCH v3</span>
        <span class="badge badge-sim">SIMULATION</span>
      </div>
      <table class="terminal-table">
        <thead><tr><th>TIER</th><th>NET FLOW (24h)</th><th class="text-right">VALUE</th></tr></thead>
        <tbody>
          <tr><td class="text-purple-400 font-bold">TIER</td><td><div class="w-full h-1 bg-slate-800 mt-1"><div class="bg-emerald-500 h-full w-[80%]"></div></div></td><td class="text-right text-emerald-400">+$1.2M</td></tr>
          <tr><td class="text-blue-400 font-bold">WHALE</td><td><div class="w-full h-1 bg-slate-800 mt-1"><div class="bg-red-500 h-full w-[60%]"></div></div></td><td class="text-right text-red-400">-$1.5M</td></tr>
          <tr><td class="text-cyan-400 font-bold">SHARK</td><td><div class="w-full h-1 bg-slate-800 mt-1"><div class="bg-emerald-500 h-full w-[45%]"></div></div></td><td class="text-right text-emerald-400">+$520K</td></tr>
          <tr><td class="text-teal-400 font-bold">DOLPHIN</td><td><div class="w-full h-1 bg-slate-800 mt-1"><div class="bg-red-500 h-full w-[70%]"></div></div></td><td class="text-right text-red-400">-$310K</td></tr>
          <tr><td class="text-slate-400 font-bold">FISH</td><td><div class="w-full h-1 bg-slate-800 mt-1"><div class="bg-emerald-500 h-full w-[30%]"></div></div></td><td class="text-right text-emerald-400">+$150K</td></tr>
          <tr><td class="text-slate-400 font-bold">PLANKTON</td><td><div class="w-full h-1 bg-slate-800 mt-1"><div class="bg-red-500 h-full w-[50%]"></div></div></td><td class="text-right text-red-400">-$55K</td></tr>
        </tbody>
      </table>
    </div>

    <!-- Squeeze Radar (restored) -->
    <div class="col-span-12 lg:col-span-6 card interactive" onclick="openModal('SQUEEZE')">
      <div class="card-header">
        <span class="card-title">SQUEEZE RADAR (HIGH RISK)</span>
        <span class="badge badge-onchain">ON-CHAIN</span>
      </div>
      <div class="flex-1 min-h-[150px]">
        <canvas id="squeezeChart"></canvas>
      </div>
    </div>

    <!-- Alpha Feed (mock text like screenshot) -->
    <div class="col-span-12 lg:col-span-6 card">
      <div class="card-header">
        <span class="card-title">ALPHA FEED</span>
        <span class="badge badge-sim">SIMULATION</span>
      </div>
      <div class="flex-1 text-[10px] font-mono overflow-y-auto space-y-2">
        <p class="text-emerald-400">HIP-3 Inflation Vote ends in 24h</p>
        <p class="text-slate-400">Governance Upgrade v3.0</p>
        <p class="text-emerald-400">Aster Bridge Upgrade v3.0</p>
        <p class="text-slate-400">OI hits new All Time High</p>
        <p class="text-emerald-400">Analysis: Top 10</p>
      </div>
    </div>

    <!-- LST Yields (with links, bottom left) -->
    <div class="col-span-12 lg:col-span-4 card">
      <div class="card-header">
        <span class="card-title">LST YIELDS</span>
        <span class="badge badge-onchain">ON-CHAIN</span>
      </div>
      <table class="terminal-table">
        <thead><tr><th>LST</th><th>APY</th></tr></thead>
        <tbody>
          <tr><td>beHYPE</td><td class="text-right text-emerald-400"><a href="https://app.hyperbeat.org/staking" target="_blank" class="link-hover">2.05%</a></td></tr>
          <tr><td>stHYPE</td><td class="text-right text-emerald-400"><a href="https://app.valantis.xyz/staking" target="_blank" class="link-hover">2.40%</a></td></tr>
          <tr><td>kHYPE</td><td class="text-right text-emerald-400"><a href="https://kinetiq.xyz/stake-hype" target="_blank" class="link-hover">2.23%</a></td></tr>
        </tbody>
      </table>
    </div>

    <!-- Simulation (bottom middle, mock text) -->
    <div class="col-span-12 lg:col-span-4 card">
      <div class="card-header">
        <span class="card-title">SIMULATION</span>
        <span class="badge badge-sim">SIMULATION</span>
      </div>
      <div class="flex-1 text-[10px] font-mono overflow-y-auto space-y-2">
        <p class="text-emerald-400">LST YIELD OPTIMIZER</p>
        <p class="text-slate-400">Simulation running...</p>
      </div>
    </div>
  </main>

  <!-- Modal (with fade-in zoom animation) -->
  <div id="chartModal" onclick="closeModal()">
    <div class="modal-container" onclick="e.stopPropagation()">
      <div class="w-1/4 bg-[#020617] p-6 border-r border-slate-800 flex flex-col">
        <h2 id="modalTitle" class="text-lg font-bold text-white mb-2">TITLE</h2>
        <div id="modalDesc" class="text-xs text-slate-400 leading-relaxed mb-6"></div>
        <div class="mt-auto pt-4 border-t border-slate-800">
          <div id="modalLabel" class="text-[10px] font-bold mb-1">DATA TYPE</div>
          <div id="modalSource" class="text-[10px] text-slate-500 italic">Source: Verification active...</div>
        </div>
      </div>
      <div class="flex-1 p-6 relative bg-[#0B1221]">
        <div class="close">&times;</div>
        <div id="modalBody" class="w-full h-full relative">
          <canvas id="modalCanvas"></canvas>
          <div id="modalHtml" class="hidden h-full overflow-auto"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- STATE ---
    const API_BINANCE = 'https://api.binance.com/api/v3/ticker/price';
    const API_HL = 'https://api.hyperliquid.xyz/info';
    let currentPrices = { btcBin: 96579, btcHl: 96500, ethBin: 3312, ethHl: 3300, hype: 30 };
    let charts = {};
    let modalChart = null;

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
      initCharts();
      updateData();
      setInterval(updateData, 60000); // 1 min refresh
    });

    function initCharts() {
      // HSI Radar
      charts.hsi = new Chart(document.getElementById('hsiRadar').getContext('2d'), {
        type: 'radar',
        data: {
          labels: ['SOC', 'WHL', 'OI', 'FND', 'VOL'],
          datasets: [{ data: [80, 70, 65, 55, 85], backgroundColor: 'rgba(16, 185, 129, 0.1)', borderColor: '#10B981', borderWidth: 1 }]
        },
        options: { maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { r: { grid: { color: '#1E293B' }, ticks: { display: false }, pointLabels: { color: '#64748B', font: { size: 9 } } } } }
      });

      // Squeeze Chart
      charts.squeeze = new Chart(document.getElementById('squeezeChart').getContext('2d'), {
        type: 'line',
        data: {
          labels: ['1h', '2h', '3h', '4h', '5h', 'Now'],
          datasets: [
            { type: 'line', data: [96000, 96200, 95800, 96500, 97000, 96800], borderColor: '#10B981', borderWidth: 2, pointRadius: 0, tension: 0.3, yAxisID: 'y' },
            { type: 'bar', data: [0.01, -0.02, 0.04, 0.01, -0.05, 0.02], backgroundColor: '#EF4444', yAxisID: 'y1' }
          ]
        },
        options: { maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false }, y1: { display: false } } }
      });
    }

    async function updateData() {
      try {
        // Binance prices (no decimals)
        const [bBtc, bEth] = await Promise.all([
          fetch(`${API_BINANCE}?symbol=BTCUSDT`).then(r => r.json()),
          fetch(`${API_BINANCE}?symbol=ETHUSDT`).then(r => r.json())
        ]);
        currentPrices.btcBin = Math.floor(parseFloat(bBtc.price));
        currentPrices.ethBin = Math.floor(parseFloat(bEth.price));

        // Hyperliquid prices (mock for demo)
        currentPrices.btcHl = currentPrices.btcBin - 79; // small spread
        currentPrices.ethHl = currentPrices.ethBin - 12;

        // Update UI (no decimals)
        document.getElementById('tick-hype').innerText = `$${currentPrices.hype}`;
        document.getElementById('tick-btc').innerText = `$${currentPrices.btcBin} +2.1%`;
        document.getElementById('tick-eth').innerText = `$${currentPrices.ethBin} -0.8%`;

        updateAOSRow('hype', currentPrices.hype, currentPrices.hype * 0.9949); // Mock Aster vs HL
        updateAOSRow('btc', currentPrices.btcBin, currentPrices.btcHl); // Aster vs HL
        updateAOSRow('eth', currentPrices.ethBin, currentPrices.ethHl); // Lighter vs HL

      } catch (err) {
        console.error("API Error", err);
        document.getElementById('rpc-status').innerText = "● RPC OFFLINE";
        document.getElementById('rpc-status').className = "text-red-500 text-[10px]";
      }
    }

    function updateAOSRow(pair, price1, price2) {
      const spread = ((price1 - price2) / price2) * 100;
      const spreadEl = document.getElementById(`${pair}-spread`);
      spreadEl.innerText = `${spread.toFixed(3)}%`;
      spreadEl.className = Math.abs(spread) > 0.05 ? "text-right font-bold text-emerald-400" : "text-right font-bold text-slate-400";
      document.getElementById(`${pair}-profit`).innerText = `$${(Math.abs(spread)*150).toFixed(0)}`;
    }

    // --- MODAL SYSTEM ---
    function openModal(type) {
      const modal = document.getElementById('chartModal');
      modal.style.display = 'flex';
      setTimeout(() => modal.classList.add('open'), 10); // Trigger animation
      const canvas = document.getElementById('modalCanvas');
      const htmlArea = document.getElementById('modalHtml');
      const title = document.getElementById('modalTitle');
      const desc = document.getElementById('modalDesc');

      if (modalChart) modalChart.destroy();

      canvas.classList.add('hidden');
      htmlArea.classList.add('hidden');

      if (type === 'AOS') {
        title.innerText = "AOS LIVE VERIFICATION";
        desc.innerHTML = `
          <div class="bg-slate-900 p-3 rounded border border-slate-700 font-mono text-[10px] space-y-2">
            <div class="text-emerald-400">Aster Price: $${currentPrices.btcBin}</div>
            <div class="text-blue-400">Hyperliquid: $${currentPrices.btcHl}</div>
            <div class="border-t border-slate-700 pt-1">Math: ((Aster-HL)/HL)*100</div>
          </div>
          <p class="mt-4">Displayed spread is real difference between DEX Aster and HL perps.</p>
        `;
        htmlArea.classList.remove('hidden');
        htmlArea.innerHTML = `<div class="flex items-center justify-center h-full text-slate-500">Live calculations verified.</div>`;
      }

      if (type === 'HSI') {
        title.innerText = "HSI SENTIMENT DETAIL";
        desc.innerText = "SOC: Social volume (X/Discord). WHL: Net flow large wallets. OI: Open interest. FND: Funding rates. VOL: Volume vs average.";
        canvas.classList.remove('hidden');
        modalChart = new Chart(canvas.getContext('2d'), {
          type: 'radar',
          data: { labels: ['SOC', 'WHL', 'OI', 'FND', 'VOL'], datasets: [{ data: [80, 70, 65, 55, 85], backgroundColor: 'rgba(16, 185, 129, 0.2)', borderColor: '#10B981' }] },
          options: { maintainAspectRatio: false, scales: { r: { grid: { color: '#334155' }, pointLabels: { color: '#fff' } } } }
        });
      }

      if (type === 'SQUEEZE') {
        title.innerText = "SQUEEZE MAP (LIVE)";
        desc.innerText = "Price movement combined with funding rates. Negative funding (red) + rising price = potential Short Squeeze.";
        canvas.classList.remove('hidden');
        modalChart = new Chart(canvas.getContext('2d'), {
          type: 'line',
          data: {
            labels: ['00:00','04:00','08:00','12:00','Now'],
            datasets: [
              { type: 'line', data: [96000, 96500, 96200, 97000, 96800], borderColor: '#10B981', borderWidth: 2, pointRadius: 0, tension: 0.3, yAxisID: 'y' },
              { type: 'bar', data: [0.01, -0.02, 0.04, 0.01, -0.05, 0.02], backgroundColor: '#EF4444', yAxisID: 'y1' }
            ]
          },
          options: { maintainAspectRatio: false, scales: { y: { display: true }, y1: { position: 'right' } } }
        });
      }

      if (type === 'GOVERNANCE') {
        title.innerText = "GOVERNANCE & HIPS";
        desc.innerText = "Overview of HIP proposals from Gitbook and their impact on inflation.";
        htmlArea.classList.remove('hidden');
        htmlArea.innerHTML = `
          <div class="space-y-4">
            <div class="p-3 border border-emerald-500/30 bg-emerald-500/5 rounded">
              <div class="flex justify-between font-bold text-emerald-400"><span>HIP-3: Inflation Vote</span><span>ACTIVE</span></div>
              <p class="text-[10px] mt-1">Reduction of emissions by 5%. Impact: Deflationary, Yield -0.8%.</p>
            </div>
            <table class="terminal-table mt-4">
              <thead><tr><th>Validator</th><th>Vote</th></tr></thead>
              <tbody><tr><td>Jeff-HL</td><td class="text-emerald-400">AYE</td></tr><tr><td>K-Nodes</td><td class="text-red-400">NAY</td></tr></tbody>
            </table>
          </div>`;
      }
    }

    function closeModal() {
      const modal = document.getElementById('chartModal');
      modal.classList.remove('open');
      setTimeout(() => modal.style.display = 'none', 300); // Fade out + zoom, then hide
    }
  </script>
</body>
</html>
