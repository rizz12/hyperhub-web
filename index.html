```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HyperHub – Hyperliquid Metrics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <script src="https://cdn.tailwindcss.com"></script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      background-color: #020617; /* Slate 950 */
      font-family: 'Inter', sans-serif;
    }
    .glass {
      background: radial-gradient(circle at top left, rgba(30, 41, 59, 0.4), transparent 100%),
                  rgba(15, 23, 42, 0.6);
      border: 1px solid rgba(148, 163, 184, 0.1);
      backdrop-filter: blur(12px);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }
    .card-hover {
      transition: all 0.2s ease-in-out;
      cursor: pointer;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      border-color: rgba(52, 211, 153, 0.3); /* Emerald tint */
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    }
    .chart-wrapper {
      position: relative;
      width: 100%;
      height: 200px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .chart-wrapper canvas {
        cursor: zoom-in;
    }
    .info-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 9999px;
      border: 1px solid rgba(148, 163, 184, 0.2);
      color: #94a3b8;
      font-size: 10px;
      width: 16px;
      height: 16px;
      cursor: help;
    }
    .info-badge:hover {
      border-color: #34d399;
      color: #34d399;
    }

    /* Modal styles */
    #chartModal {
        transition: opacity 0.3s ease;
    }
    #chartModal.hidden {
        opacity: 0;
        pointer-events: none;
    }
    #chartModal:not(.hidden) {
        opacity: 1;
        pointer-events: auto;
    }

    /* Governance Table Styles */
    .gov-row {
        transition: background-color 0.15s;
        cursor: pointer;
    }
    .gov-row:hover {
        background-color: rgba(255,255,255,0.03);
    }
    .gov-detail-row {
        background-color: rgba(0,0,0,0.2);
    }

    /* News Item Hover */
    .news-item:hover {
        background-color: rgba(255,255,255,0.03);
    }
  </style>
</head>

<body class="min-h-screen text-gray-100 flex flex-col">

  <header class="border-b border-white/5 bg-slate-950/80 backdrop-blur sticky top-0 z-40">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
      <div class="flex items-center gap-2">
        <div class="w-3 h-3 rounded-sm bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"></div>
        <span class="font-bold text-sm tracking-wide text-gray-100">HyperHub</span>
      </div>
      <nav class="flex items-center gap-6 text-xs font-medium text-gray-400">
        <a href="#dashboard" id="nav-dashboard" class="hover:text-emerald-400 transition-colors text-emerald-400">Dashboard</a>
        <a href="#governance" id="nav-governance" class="hover:text-emerald-400 transition-colors">Governance</a>
      </nav>
    </div>
  </header>

  <main class="flex-1 max-w-7xl mx-auto w-full px-4 pb-16 pt-6 relative">

    <div id="view-dashboard" class="space-y-6 animate-fade-in">

        <section class="space-y-3">
            <div class="flex items-end justify-between">
                <div>
                    <h1 class="text-xl font-bold text-gray-100">Market Overview</h1>
                    <p class="text-xs text-gray-500">Realtime Hyperliquid metrics</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-4 auto-rows-fr">

                <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between h-full min-h-[140px]">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">HYPE Price</span>
                        <span class="info-badge" title="Sourced from CoinGecko API">?</span>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-white tracking-tight" id="hypePrice">$30.00</div>
                        <div class="flex items-center gap-2 mt-1">
                            <span class="text-xs font-medium text-emerald-400 bg-emerald-400/10 px-1.5 py-0.5 rounded" id="hypeChange">+5.0%</span>
                            <span class="text-[10px] text-gray-500">24h</span>
                        </div>
                    </div>
                </div>

                <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between h-full min-h-[140px]">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">Trend</span>
                        <span class="info-badge" title="24h price movement direction">?</span>
                    </div>
                    <div>
                        <div class="text-lg font-semibold text-gray-200">Bullish</div>
                        <div class="text-xs text-gray-500 mt-1">Prev Close: <span class="text-gray-300">$28.57</span></div>
                        <div class="w-full bg-gray-700/30 h-1.5 mt-3 rounded-full overflow-hidden">
                            <div class="bg-emerald-500 h-full w-[75%]"></div>
                        </div>
                    </div>
                </div>

                <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between h-full min-h-[140px]">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">24h Volume</span>
                        <span class="info-badge" title="Total trading volume across all pairs">?</span>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-white tracking-tight" id="volumeValue">$500M</div>
                        <div class="text-xs text-emerald-400 mt-1">High Activity</div>
                    </div>
                </div>

                <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between h-full min-h-[140px]">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-[10px] font-bold text-gray-500 uppercase tracking-wider">Market Cap</span>
                        <span class="info-badge" title="Circulating Supply * Price">?</span>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-white tracking-tight" id="mcValue">$3B</div>
                        <div class="text-xs text-gray-500 mt-1">FDV: <span class="text-gray-400">$6B</span></div>
                    </div>
                </div>

            </div>
        </section>

        <section class="space-y-3">
            <div>
                <h1 class="text-xl font-bold text-gray-100">Exclusive Insights</h1>
                <p class="text-xs text-gray-500">Advanced analytics & Sentiment</p>
            </div>

            <div class="glass rounded-xl p-5 border-l-4 border-l-emerald-500">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="col-span-1 flex flex-col justify-center space-y-4">
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <h2 class="text-lg font-bold text-white">HSI Index</h2>
                                <span class="px-2 py-0.5 rounded text-[10px] font-bold bg-emerald-500/20 text-emerald-400 border border-emerald-500/30">BULLISH</span>
                            </div>
                            <div class="text-4xl font-black text-white" id="HSISent">75<span class="text-lg text-gray-500 font-normal">/100</span></div>
                        </div>
                        <p class="text-xs text-gray-400 leading-relaxed">
                            <strong>Hyperliquid Sentiment Index (HSI):</strong> A composite score derived from social momentum, whale wallet movements, and open interest ratios.
                            <br><br>
                            Click the chart to expand and see the detailed breakdown of the 5 contributing factors.
                        </p>
                    </div>
                    <div class="col-span-2 relative h-64 flex items-center justify-center">
                        <div class="chart-wrapper" style="height: 100%;">
                            <canvas id="HSIGauge"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">

                <div class="glass rounded-xl p-4 card-hover" onclick="openChartModalFromId('giypChart')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-[11px] font-bold text-gray-500 uppercase">GIYP Predictor</div>
                            <div class="text-lg font-bold text-emerald-400">+0.5% Yield</div>
                        </div>
                        <span class="info-badge" title="Governance Impact Yield Predictor">?</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="giypChart"></canvas>
                    </div>
                </div>

                <div class="glass rounded-xl p-4 card-hover" onclick="openChartModalFromId('adlHeatmap')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-[11px] font-bold text-gray-500 uppercase">ADL Risk Heatmap</div>
                            <div class="text-lg font-bold text-red-400">High Leverage</div>
                        </div>
                        <span class="info-badge" title="Auto-Deleveraging Risk Zones">?</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="adlHeatmap"></canvas>
                    </div>
                </div>

                <div class="glass rounded-xl p-4 card-hover" onclick="openChartModalFromId('wfsiChart')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-[11px] font-bold text-gray-500 uppercase">Whale Flow (WFSI)</div>
                            <div class="text-lg font-bold text-emerald-400">Score: 85</div>
                        </div>
                        <span class="info-badge" title="Whale Flow Sentiment Index">?</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="wfsiChart"></canvas>
                    </div>
                </div>

                <div class="glass rounded-xl p-4 card-hover" onclick="openChartModalFromId('aosChart')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-[11px] font-bold text-gray-500 uppercase">Arbitrage Scanner</div>
                            <div class="text-lg font-bold text-white">8/10 Opps</div>
                        </div>
                        <span class="info-badge" title="Arbitrage Opportunity Scanner">?</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="aosChart"></canvas>
                    </div>
                </div>

                <div class="glass rounded-xl p-4 card-hover" onclick="openChartModalFromId('smsChart')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-[11px] font-bold text-gray-500 uppercase">Social Momentum</div>
                            <div class="text-lg font-bold text-emerald-400">90 (Spike)</div>
                        </div>
                        <span class="info-badge" title="Social Momentum Score">?</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="smsChart"></canvas>
                    </div>
                </div>

                <div class="glass rounded-xl p-4 card-hover" onclick="openChartModalFromId('lstChart')">
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <div class="text-[11px] font-bold text-gray-500 uppercase">LST Optimizer</div>
                            <div class="text-lg font-bold text-white">beHYPE: 15.2%</div>
                        </div>
                        <span class="info-badge" title="Liquid Staking Yield Comparison">?</span>
                    </div>
                    <div class="chart-wrapper">
                        <canvas id="lstChart"></canvas>
                    </div>
                </div>

            </div>
        </section>

        <section class="space-y-3 pt-4">
            <div>
                <h1 class="text-xl font-bold text-gray-100">Community Updates</h1>
                <p class="text-xs text-gray-500">Latest news from Reddit & Official Channels</p>
            </div>

            <div class="glass rounded-xl p-4">
                <ul class="space-y-1">
                    <li class="news-item flex items-center justify-between p-3 rounded cursor-pointer border-b border-white/5 last:border-0">
                        <div class="flex items-center gap-3">
                            <span class="text-orange-500">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.736 6.979C9.208 6.193 9.696 6 10 6c.304 0 .792.193 1.264.979a1 1 0 001.715-1.029C12.279 4.784 11.232 4 10 4s-2.279.784-2.979 1.95c-.285.475-.507 1.002-.67 1.55H6a1 1 0 000 2h.013a9.358 9.358 0 000 1H6a1 1 0 100 2h.351c.163.548.385 1.075.67 1.55C7.721 15.216 8.768 16 10 16s2.279-.784 2.979-1.95a1 1 0 10-1.715-1.029c-.472.786-.96.979-1.264.979-.304 0-.792-.193-1.264-.979a4.265 4.265 0 01-.264-.521H10a1 1 0 100-2H8.017a7.36 7.36 0 010-1H10a1 1 0 100-2H8.472c.08-.185.167-.36.264-.521z" clip-rule="evenodd"/></svg>
                            </span>
                            <div>
                                <h4 class="text-sm font-medium text-gray-200">HIP-4: Fee Adjustment Proposal Passed</h4>
                                <p class="text-[10px] text-gray-500">r/hyperliquid • 2 hours ago</p>
                            </div>
                        </div>
                        <a href="#" class="text-xs text-emerald-400 hover:underline">Read &rarr;</a>
                    </li>
                    <li class="news-item flex items-center justify-between p-3 rounded cursor-pointer border-b border-white/5 last:border-0">
                        <div class="flex items-center gap-3">
                            <span class="text-blue-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>
                            </span>
                            <div>
                                <h4 class="text-sm font-medium text-gray-200">New ATH in Daily Volume ($1.2B)</h4>
                                <p class="text-[10px] text-gray-500">DeFiLlama • 5 hours ago</p>
                            </div>
                        </div>
                        <a href="#" class="text-xs text-emerald-400 hover:underline">Read &rarr;</a>
                    </li>
                    <li class="news-item flex items-center justify-between p-3 rounded cursor-pointer border-b border-white/5 last:border-0">
                        <div class="flex items-center gap-3">
                            <span class="text-purple-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                            </span>
                            <div>
                                <h4 class="text-sm font-medium text-gray-200">New Validator Staking Guide Released</h4>
                                <p class="text-[10px] text-gray-500">Official Blog • 8 hours ago</p>
                            </div>
                        </div>
                        <a href="#" class="text-xs text-emerald-400 hover:underline">Read &rarr;</a>
                    </li>
                     <li class="news-item flex items-center justify-between p-3 rounded cursor-pointer border-b border-white/5 last:border-0">
                        <div class="flex items-center gap-3">
                            <span class="text-gray-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.013 8.013 0 01-5.6-2.3L2 22l.7-5.3A8.008 8.008 0 012 12c0-4.418 3.582-8 8-8s8 3.582 8 8z"></path></svg>
                            </span>
                            <div>
                                <h4 class="text-sm font-medium text-gray-200">Discussion: HYPE vs DYDX tokenomics</h4>
                                <p class="text-[10px] text-gray-500">r/cryptocurrency • 12 hours ago</p>
                            </div>
                        </div>
                        <a href="#" class="text-xs text-emerald-400 hover:underline">Read &rarr;</a>
                    </li>
                     <li class="news-item flex items-center justify-between p-3 rounded cursor-pointer last:border-0">
                        <div class="flex items-center gap-3">
                            <span class="text-emerald-400">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
                            </span>
                            <div>
                                <h4 class="text-sm font-medium text-gray-200">Whale Alert: 5M HYPE moved to cold storage</h4>
                                <p class="text-[10px] text-gray-500">WhaleAlert • 1 day ago</p>
                            </div>
                        </div>
                        <a href="#" class="text-xs text-emerald-400 hover:underline">Read &rarr;</a>
                    </li>
                </ul>
            </div>
        </section>

    </div>
    <div id="view-governance" class="hidden space-y-6 animate-fade-in">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-xl font-bold text-gray-100">Governance</h1>
                <p class="text-xs text-gray-500">Active HIPs and Validator voting behavior</p>
            </div>
            <a href="#" class="text-xs text-emerald-400 hover:underline">View Docs &rarr;</a>
        </div>

        <div class="glass rounded-xl overflow-hidden border border-white/5">
            <table class="w-full text-sm text-left text-gray-400">
                <thead class="text-xs text-gray-500 uppercase bg-white/5">
                    <tr>
                        <th class="px-6 py-3">HIP ID</th>
                        <th class="px-6 py-3">Proposal Title</th>
                        <th class="px-6 py-3">Status</th>
                        <th class="px-6 py-3 text-right">Vote Ratio (Aye/Nay)</th>
                        <th class="px-6 py-3 text-center">Action</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-white/5">
                    <tr class="gov-row bg-slate-900/40" onclick="toggleGovRow('hip-1')">
                        <td class="px-6 py-4 font-medium text-white">HIP-1</td>
                        <td class="px-6 py-4">Increase beHYPE staking rewards</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 rounded text-[10px] bg-emerald-500/10 text-emerald-400 border border-emerald-500/20">Active</span></td>
                        <td class="px-6 py-4 text-right">
                            <div class="flex items-center justify-end gap-2">
                                <span class="text-emerald-400">65%</span>
                                <div class="w-16 h-1.5 bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-emerald-500 h-full" style="width: 65%"></div>
                                </div>
                                <span class="text-red-400">35%</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-center text-xs text-gray-500">Click to expand ▼</td>
                    </tr>
                    <tr id="hip-1" class="hidden gov-detail-row">
                        <td colspan="5" class="px-6 py-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-xs">
                                <div>
                                    <h4 class="font-bold text-white mb-2">Proposal Summary</h4>
                                    <p class="text-gray-400 mb-2">This proposal seeks to increase the base APY for beHYPE liquid staking by allocating a larger portion of protocol fees to the staking pool.</p>
                                    <div class="text-emerald-400 font-medium">Impact: +1.0% Expected APY Increase</div>
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <h4 class="font-bold text-emerald-400 mb-2">Top Aye Validators</h4>
                                        <ul class="space-y-1 text-gray-400">
                                            <li class="flex justify-between"><span>Validator One</span> <span>3.2M VP</span></li>
                                            <li class="flex justify-between"><span>Node Gurus</span> <span>1.5M VP</span></li>
                                            <li class="flex justify-between"><span>HyperStakers</span> <span>900k VP</span></li>
                                        </ul>
                                    </div>
                                    <div>
                                        <h4 class="font-bold text-red-400 mb-2">Top Nay Validators</h4>
                                        <ul class="space-y-1 text-gray-400">
                                            <li class="flex justify-between"><span>Conservative VC</span> <span>2.1M VP</span></li>
                                            <li class="flex justify-between"><span>Old School Node</span> <span>800k VP</span></li>
                                            <li class="flex justify-between"><span>Alpha Labs</span> <span>400k VP</span></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </td>
                    </tr>

                    <tr class="gov-row bg-slate-900/40" onclick="toggleGovRow('hip-2')">
                        <td class="px-6 py-4 font-medium text-white">HIP-2</td>
                        <td class="px-6 py-4">Adjust fee structure for Makers</td>
                        <td class="px-6 py-4"><span class="px-2 py-1 rounded text-[10px] bg-gray-500/10 text-gray-400 border border-gray-500/20">Closed</span></td>
                        <td class="px-6 py-4 text-right">
                            <div class="flex items-center justify-end gap-2">
                                <span class="text-emerald-400">72%</span>
                                <div class="w-16 h-1.5 bg-gray-700 rounded-full overflow-hidden">
                                    <div class="bg-emerald-500 h-full" style="width: 72%"></div>
                                </div>
                                <span class="text-red-400">28%</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-center text-xs text-gray-500">Click to expand ▼</td>
                    </tr>
                    <tr id="hip-2" class="hidden gov-detail-row">
                        <td colspan="5" class="px-6 py-4">
                            <div class="text-xs text-gray-400">
                                Proposal passed successfully. Fee reduction implemented on block #892100.
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <footer class="border-t border-white/5 mt-10 py-6 text-center text-xs text-gray-500">
        <p>HyperHub by <a href="https://rubynodes.io" target="_blank" class="text-emerald-400 hover:text-emerald-300 font-medium">Ruby Nodes 2025</a></p>
        <p class="mt-1 opacity-60">Providing professional RPC infrastructure for the Hyperliquid ecosystem.</p>
    </footer>

  </main>

  <div id="chartModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm hidden p-4" onclick="closeModal(event)">
      <div class="glass w-full max-w-4xl rounded-2xl p-6 relative flex flex-col max-h-[90vh]" onclick="event.stopPropagation()">
          <button onclick="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white text-xl font-bold z-10">&times;</button>

          <div class="mb-4 pr-10">
            <h2 id="modalTitle" class="text-2xl font-bold text-white">Metric Detail</h2>
            <p id="modalDesc" class="text-sm text-gray-400 mt-2 leading-relaxed">Historical data analysis</p>
          </div>

          <div class="flex-1 relative min-h-[400px] w-full bg-slate-900/50 rounded-lg p-2">
              <canvas id="modalCanvas"></canvas>
          </div>
      </div>
  </div>

  <script>
    // --- NAVIGATION LOGIC ---
    const navDash = document.getElementById('nav-dashboard');
    const navGov = document.getElementById('nav-governance');
    const viewDash = document.getElementById('view-dashboard');
    const viewGov = document.getElementById('view-governance');

    function switchView(viewName) {
        if(viewName === 'dashboard') {
            viewDash.classList.remove('hidden');
            viewGov.classList.add('hidden');
            navDash.classList.add('text-emerald-400');
            navGov.classList.remove('text-emerald-400');
            // Re-render dashboard charts in case they broke while hidden
            initCharts();
        } else {
            viewDash.classList.add('hidden');
            viewGov.classList.remove('hidden');
            navDash.classList.remove('text-emerald-400');
            navGov.classList.add('text-emerald-400');
        }
    }

    navDash.addEventListener('click', (e) => { e.preventDefault(); switchView('dashboard'); });
    navGov.addEventListener('click', (e) => { e.preventDefault(); switchView('governance'); });

    // --- GOVERNANCE LOGIC ---
    function toggleGovRow(id) {
        const el = document.getElementById(id);
        if(el) {
            el.classList.toggle('hidden');
        }
    }

    // --- CHART DESCRIPTIONS ---
    const chartDescriptions = {
        'HSIGauge': "The Hyperliquid Sentiment Index (HSI) is a comprehensive metric combining on-chain data and social signals. It helps traders gauge market emotion by weighting Open Interest changes, Whale wallet inflows, and social media momentum. A score above 70 indicates strong bullish sentiment, while below 30 suggests fear or capitulation.",
        'giypChart': "The Governance Impact Yield Predictor (GIYP) forecasts how active proposals will affect staking returns. By analyzing the breakdown of 'Aye' vs 'Nay' votes on fee-related proposals, this chart helps stakers anticipate APY fluctuations before they happen.",
        'adlHeatmap': "The ADL Risk Heatmap visualizes the probability of Auto-Deleveraging events across top pairs. Taller red bars indicate highly leveraged long positions that are at risk of forced liquidation. Traders use this to avoid pairs with overheating leverage.",
        'wfsiChart': "The Whale Flow Sentiment Index (WFSI) tracks large capital movements into the Hyperliquid ecosystem. An upward trend signifies 'Smart Money' accumulation, often preceding a price increase. This metric filters out retail noise to focus on high-net-worth wallet behavior.",
        'aosChart': "The Arbitrage Opportunity Scanner compares prices between Hyperliquid and other exchanges (like Binance or dYdX). A higher score indicates significant price discrepancies that arbitrage bots or traders can exploit for profit. This chart highlights the top 3 most profitable spread opportunities currently available.",
        'smsChart': "The Social Momentum Score (SMS) correlates discussion volume on platforms like X (Twitter) and Reddit with trading volume. Spikes in this chart often indicate a viral trend or news event driving retail interest, which can lead to short-term volatility.",
        'lstChart': "The Liquid Staking Token (LST) Optimizer compares the real-time APY of various HYPE liquid staking derivatives (like beHYPE vs kHYPE). It accounts for fees and slashing risks to recommend the most profitable staking option for your idle HYPE tokens."
    };

    // --- CHART LOGIC ---
    let charts = {}; // Store instances to destroy if needed
    let modalChartInstance = null;

    const commonOptions = {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: { display: false },
            tooltip: {
                backgroundColor: 'rgba(15, 23, 42, 0.9)',
                titleColor: '#34d399',
                bodyColor: '#fff',
                borderColor: 'rgba(148, 163, 184, 0.2)',
                borderWidth: 1,
                padding: 10,
                displayColors: false,
            }
        },
        scales: {
            x: { display: false },
            y: { display: false }
        },
        onClick: (e, activeEls, chart) => {
            // Trigger Modal on Click (for HSI main chart)
            openChartModal(chart);
        }
    };

    function initCharts() {
        // HSI RADAR
        const ctxHSI = document.getElementById('HSIGauge');
        if(ctxHSI && !charts['hsi']) {
            charts['hsi'] = new Chart(ctxHSI, {
                type: 'radar',
                data: {
                    labels: ['Sentiment', 'Whales', 'OI', 'Funding', 'Social'],
                    datasets: [{
                        label: 'HSI Score',
                        data: [80, 70, 65, 75, 85],
                        backgroundColor: 'rgba(52, 211, 153, 0.2)',
                        borderColor: '#34d399',
                        pointBackgroundColor: '#34d399',
                        borderWidth: 2
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(255,255,255,0.1)' },
                            grid: { color: 'rgba(255,255,255,0.1)' },
                            pointLabels: { color: '#94a3b8', font: { size: 10 } },
                            ticks: { display: false }
                        }
                    }
                }
            });
        }

        // GIYP (Changed to Doughnut for clearer Vote Split)
        const ctxGIYP = document.getElementById('giypChart');
        if(ctxGIYP && !charts['giyp']) {
            charts['giyp'] = new Chart(ctxGIYP, {
                type: 'doughnut',
                data: {
                    labels: ['Aye (Yield Up)', 'Nay (No Change)'],
                    datasets: [{
                        data: [65, 35],
                        backgroundColor: ['#34d399', '#f87171'],
                        borderWidth: 0,
                        hoverOffset: 4
                    }]
                },
                options: {
                    ...commonOptions,
                    cutout: '70%',
                    plugins: { legend: { display: false } }
                }
            });
        }

        // ADL (Bar with Axis Labels)
        const ctxADL = document.getElementById('adlHeatmap');
        if(ctxADL && !charts['adl']) {
            charts['adl'] = new Chart(ctxADL, {
                type: 'bar',
                data: {
                    labels: ['HYPE', 'BTC', 'ETH', 'SOL', 'ARB'],
                    datasets: [{
                        data: [80, 60, 90, 40, 20],
                        backgroundColor: ['#f87171', '#fbbf24', '#f87171', '#34d399', '#34d399'],
                        borderRadius: 4
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        x: {
                            display: true,
                            ticks: { color: '#94a3b8', font: {size: 9} },
                            grid: { display: false }
                        },
                        y: { display: false }
                    }
                }
            });
        }

        // WFSI (Line)
        const ctxWFSI = document.getElementById('wfsiChart');
        if(ctxWFSI && !charts['wfsi']) {
            charts['wfsi'] = new Chart(ctxWFSI, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        data: [50, 55, 62, 70, 78, 82, 85],
                        borderColor: '#34d399',
                        backgroundColor: 'rgba(52, 211, 153, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: commonOptions
            });
        }

        // AOS (Horizontal Bar for comparison)
        const ctxAOS = document.getElementById('aosChart');
        if(ctxAOS && !charts['aos']) {
            charts['aos'] = new Chart(ctxAOS, {
                type: 'bar',
                indexAxis: 'y', // Horizontal
                data: {
                    labels: ['HL-Binance', 'HL-dYdX', 'HL-Bybit'],
                    datasets: [{
                        data: [8, 6, 9],
                        backgroundColor: '#34d399',
                        borderRadius: 4
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        x: { display: false },
                        y: { display: true, ticks: {color: '#94a3b8', font: {size: 9}}, grid: {display: false} }
                    }
                }
            });
        }

        // SMS (Line Spike)
        const ctxSMS = document.getElementById('smsChart');
        if(ctxSMS && !charts['sms']) {
            charts['sms'] = new Chart(ctxSMS, {
                type: 'line',
                data: {
                    labels: ['12h', '10h', '8h', '6h', '4h', '2h', 'Now'],
                    datasets: [{
                        data: [40, 42, 45, 55, 70, 88, 90],
                        borderColor: '#34d399',
                        borderWidth: 2,
                        tension: 0.1,
                        pointRadius: 2
                    }]
                },
                options: commonOptions
            });
        }

        // LST (Bar)
        const ctxLST = document.getElementById('lstChart');
        if(ctxLST && !charts['lst']) {
            charts['lst'] = new Chart(ctxLST, {
                type: 'bar',
                data: {
                    labels: ['beHYPE', 'kHYPE'],
                    datasets: [{
                        data: [15.2, 12.5],
                        backgroundColor: ['#34d399', '#94a3b8'],
                        borderRadius: 4
                    }]
                },
                options: {
                    ...commonOptions,
                    scales: {
                        x: { display: true, ticks: {color: '#94a3b8', font: {size: 9}}, grid: {display: false} },
                        y: { display: false }
                    }
                }
            });
        }
    }

    // --- MODAL LOGIC ---
    const modal = document.getElementById('chartModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalDesc = document.getElementById('modalDesc');

    // Helper to find chart by Canvas ID and open modal
    function openChartModalFromId(canvasId) {
        const chartInstance = Chart.getChart(canvasId);
        if(chartInstance) {
            openChartModal(chartInstance);
        }
    }

    function openChartModal(sourceChart) {
        modal.classList.remove('hidden');

        // Set Title & Description
        const canvasId = sourceChart.canvas.id;
        modalTitle.textContent = canvasId === 'HSIGauge' ? "HSI Breakdown" : sourceChart.canvas.parentElement.parentElement.querySelector('.uppercase').textContent;
        modalDesc.textContent = chartDescriptions[canvasId] || "Detailed historical data analysis for this metric.";

        // Destroy previous modal chart
        if (modalChartInstance) {
            modalChartInstance.destroy();
        }

        // Clone config for larger view
        const ctxModal = document.getElementById('modalCanvas');
        const newConfig = JSON.parse(JSON.stringify(sourceChart.config)); // Deep copy config

        // Adjust options for big view
        newConfig.options.scales = {
            x: { display: true, grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#94a3b8' } },
            y: { display: true, grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#94a3b8' } }
        };
        // For Radar/Pie, scales are different
        if(newConfig.type === 'radar') {
            newConfig.options.scales = {
                r: {
                    grid: { color: 'rgba(255,255,255,0.1)' },
                    angleLines: { color: 'rgba(255,255,255,0.1)' },
                    pointLabels: { color: '#fff', font: { size: 12 } }
                }
            };
        }

        newConfig.options.plugins.legend = { display: true, labels: { color: '#fff' } };
        newConfig.options.responsive = true;
        newConfig.options.maintainAspectRatio = false;

        // Re-enable clicks being null in modal
        newConfig.options.onClick = null;

        modalChartInstance = new Chart(ctxModal, newConfig);
    }

    function closeModal(e) {
        if (!e || e.target.id === 'chartModal' || e.target.tagName === 'BUTTON') {
            modal.classList.add('hidden');
        }
    }

    // --- INITIALIZATION ---
    document.addEventListener('DOMContentLoaded', () => {
        initCharts();
    });

  </script>
</body>
</html>
