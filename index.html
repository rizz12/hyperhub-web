<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>HyperHub â€“ Hyperliquid Metrics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Tailwind CDN (simplified setup) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body {
      background-color: #020617;
    }
    .glass {
      background: radial-gradient(circle at top left, rgba(148, 163, 184, 0.12), transparent 60%),
                  rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.18);
      backdrop-filter: blur(14px);
    }
    .card-hover {
      transition: transform 0.15s ease, box-shadow 0.15s ease, border-color 0.15s ease;
    }
    .card-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 40px rgba(0, 0, 0, 0.55);
      border-color: rgba(148, 163, 184, 0.4);
    }
    .chart-wrapper {
      position: relative;
      width: 100%;
      height: 100%;
    }
    .info-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      border-radius: 9999px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-size: 10px;
      width: 16px;
      height: 16px;
      cursor: help;
    }
    .info-badge:hover {
      border-color: rgba(255, 255, 255, 0.45);
    }
  </style>
</head>

<body class="min-h-screen text-gray-100">
  <!-- Top nav -->
  <header class="border-b border-slate-800 bg-slate-950/80 backdrop-blur">
    <div class="max-w-7xl mx-auto flex items-center justify-between px-4 py-3">
      <div class="flex items-center gap-2">
        <div class="w-3 h-3 rounded-sm bg-emerald-500"></div>
        <span class="font-semibold text-sm tracking-wide">HyperHub</span>
      </div>
      <nav class="flex items-center gap-6 text-xs text-gray-400">
        <a href="#dashboard" class="hover:text-gray-100">Dashboard</a>
        <a href="#analytics" class="hover:text-gray-100">Analytics</a>
        <a href="#governance" class="hover:text-gray-100">Governance</a>
        <a href="#education" class="hover:text-gray-100">Education</a> <!-- Added for completeness -->
      </nav>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-4 pb-16 pt-6 space-y-6" id="dashboard">
    <!-- MARKET OVERVIEW HEADER -->
    <section class="space-y-2">
      <div>
        <h1 class="text-xl font-semibold text-gray-100">Market Overview</h1>
        <p class="text-xs text-gray-500">Realtime Hyperliquid metrics</p>
      </div>

      <!-- Top metric cards (standard ones) -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // HYPE Price Card: Fetches real-time price, 24h change, volume, market cap from CoinGecko API. Basic market snapshot. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">HYPE Price</span>
            <span class="info-badge text-gray-400" title="Current HYPE token price with 24h change, sourced from CoinGecko API for accuracy.">?</span>
            <span class="text-[10px] text-emerald-400/80">CoinGecko</span>
          </div>
          <div class="text-lg font-semibold" id="hypePrice">Loading...</div>
          <div class="flex justify-between items-center mt-2 text-[11px] text-gray-500">
            <span>24h Change</span>
            <span id="hypeChange">--</span>
          </div>
          <div class="text-[11px] text-gray-500 mt-2" id="hypeVolume">Volume: --</div>
          <div class="text-[11px] text-gray-500" id="hypeMarketCap">Market Cap: --</div>
        </div>

        <!-- Add other standard cards if needed, but focus on new ones -->
      </div>
    </section>

    <!-- Exclusive Insights Section -->
    <section class="space-y-2">
      <div>
        <h1 class="text-xl font-semibold text-gray-100">Exclusive Insights</h1>
        <p class="text-xs text-gray-500">Unique metrics for advanced Hyperliquid analysis</p>
      </div>

      <!-- Exclusive metric cards (grid) -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // GIYP: Predicts impact of HIP votes on liquid staking yields (e.g., beHYPE). Uses governance data from GitBook and yields from DeFiLlama. Requires scrape for real-time votes/yields. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">GIYP: Governance Impact Yield Predictor</span>
            <span class="info-badge text-gray-400" title="Predicts how governance votes affect liquid staking yields like beHYPE; helps optimize staking rewards.">?</span>
          </div>
          <div class="text-lg font-semibold" id="giypValue">Loading...</div>
          <!-- Chart or data placeholder -->
          <canvas id="giypChart" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // ADL Risk Heatmap: Heatmap of autodeleveraging risk based on OI/leverage ratios. Red for high risk (>80%). Sourced from HypurrScan. Requires scrape for OI data. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">ADL Risk Heatmap</span>
            <span class="info-badge text-gray-400" title="Visualizes ADL risk for top pairs; red zones indicate high leverage exposure to avoid wipeouts.">?</span>
          </div>
          <div class="text-lg font-semibold" id="adlValue">Loading...</div>
          <!-- Heatmap placeholder (use Chart.js or SVG) -->
          <canvas id="adlHeatmap" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // WFSI: Indexes large wallet flows with sentiment from social data. Scores 0-100. Combines HypurrScan flows and X/Reddit sentiment. Requires scrape for flows/sentiment. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">WFSI: Whale Flow Sentiment Index</span>
            <span class="info-badge text-gray-400" title="Combines whale transactions with market sentiment; high score signals bullish whale activity.">?</span>
          </div>
          <div class="text-lg font-semibold" id="wfsiValue">Loading...</div>
          <canvas id="wfsiChart" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // AOS: Scans arbitrage opportunities across chains/exchanges based on OI/prices. Scores 1-10. Uses CoinGlass for comps. Requires scrape for multi-source data. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">AOS: Arbitrage Opportunity Scanner</span>
            <span class="info-badge text-gray-400" title="Detects price discrepancies for arb trades; scores high for profitable spreads like HL vs. Aster.">?</span>
          </div>
          <div class="text-lg font-semibold" id="aosValue">Loading...</div>
          <canvas id="aosChart" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // SMS: Correlates social buzz with volume changes. Score 0-100. From X/Reddit mentions vs. volume. Requires scrape for social data. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">SMS: Social Momentum Score</span>
            <span class="info-badge text-gray-400" title="Measures social hype correlated to trading volume; predicts pumps from buzz spikes.">?</span>
          </div>
          <div class="text-lg font-semibold" id="smsValue">Loading...</div>
          <canvas id="smsChart" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // LST Yield Optimizer: Ranks LST options (beHYPE/kHYPE) by yield/risk. From DeFiLlama. Requires scrape for yields. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">LST Yield Optimizer</span>
            <span class="info-badge text-gray-400" title="Optimizes liquid staking yields with risk adjustment; recommends best LST for max APY.">?</span>
          </div>
          <div class="text-lg font-semibold" id="lstValue">Loading...</div>
          <canvas id="lstChart" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // CCLB: Benchmarks latency across chains (HL vs. Aster/Lighter). Custom pings/API. Requires backend for pings. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">CCLB: Cross Chain Latency Benchmark</span>
            <span class="info-badge text-gray-400" title="Compares block times/latency for HFT edges; highlights HL advantages.">?</span>
          </div>
          <div class="text-lg font-semibold" id="cclbValue">Loading...</div>
          <canvas id="cclbChart" class="chart-wrapper"></canvas>
        </div>

        <div class="glass card-hover rounded-xl p-4 flex flex-col justify-between">
          <!-- // MMIA: Alerts on maker-taker imbalances. Pie chart from HypurrScan. Requires scrape for fee data. -->
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] text-gray-400 uppercase tracking-wide">MMIA: Market Maker Imbalance Alert</span>
            <span class="info-badge text-gray-400" title="Detects fee structure imbalances; alerts on liquidity risks for makers.">?</span>
          </div>
          <div class="text-lg font-semibold" id="mmiaValue">Loading...</div>
          <canvas id="mmiaChart" class="chart-wrapper"></canvas>
        </div>
      </div>
    </section>

    <!-- Governance Section (in index as tab/section) -->
    <section id="governance" class="space-y-2 hidden"> <!-- Hidden by default, show via nav -->
      <div>
        <h1 class="text-xl font-semibold text-gray-100">Governance Tracker</h1>
        <p class="text-xs text-gray-500">Active HIPs and vote impacts</p>
      </div>
      <!-- Dummy table with text/seznamy -->
      <table class="w-full text-sm text-gray-400">
        <thead>
          <tr>
            <th>HIP</th>
            <th>Status</th>
            <th>Aye Votes</th>
            <th>Nay Votes</th>
            <th>Yield Impact Prediction</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>HIP-3</td>
            <td>Active</td>
            <td>List of Aye: Validator1 (1M stake), Validator2</td>
            <td>List of Nay: Validator3</td>
            <td>+0.5% on beHYPE (predicted)</td>
          </tr>
          <!-- Add more rows via JS fetch -->
        </tbody>
      </table>
      <p class="text-xs text-gray-500 mt-4">Yield impact based on vote outcomes; aye favors higher LST rewards.</p>
    </section>

    <!-- Education Section (accordion, static) -->
    <section id="education" class="space-y-2 hidden">
      <div>
        <h1 class="text-xl font-semibold text-gray-100">Education</h1>
        <p class="text-xs text-gray-500">Guides for Hyperliquid</p>
      </div>
      <!-- Accordion here as in your original -->
    </section>
  </main>

  <script>
    // Fetch CoinGecko (fixed: added params for vol/market cap)
    async function fetchHypeData() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=hyperliquid&vs_currencies=usd&include_24hr_change=true&include_24hr_vol=true&include_market_cap=true');
        const data = await response.json();
        const hype = data.hyperliquid;
        document.getElementById('hypePrice').textContent = `\[ {hype.usd.toFixed(2)}`;
        document.getElementById('hypeChange').textContent = `${hype.usd_24h_change.toFixed(2)}%`;
        document.getElementById('hypeVolume').textContent = `Volume: \]{Math.round(hype.usd_24h_vol)}`;
        document.getElementById('hypeMarketCap').textContent = `Market Cap: $${Math.round(hype.usd_market_cap)}`;
      } catch (error) {
        console.error('CoinGecko error:', error);
      }
    }
    fetchHypeData(); // Initial call
    setInterval(fetchHypeData, 60000); // Every minute

    // Nav show/hide (single-page)
    document.querySelectorAll('nav a').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        document.querySelectorAll('main > section').forEach(s => s.classList.add('hidden'));
        document.querySelector(e.target.hash).classList.remove('hidden');
      });
    });

    // Placeholder for other fetches/charts (e.g., new metrics)
    // For GIYP: fetch('/api/giyp') or scrape JSON
    // Similar for others
  </script>
</body>
</html>
