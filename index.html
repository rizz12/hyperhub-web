<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>HyperHub Terminal v2</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    /* TERMINAL THEME VARIABLES */
    :root {
      --bg-color: #020617;     /* Darker Slate */
      --card-bg: #0B1221;      /* Slightly lighter panel */
      --border-color: #1E293B; /* Slate 800 */
      --text-main: #E2E8F0;    /* Slate 200 */
      --text-muted: #64748B;   /* Slate 500 */
      --accent-green: #10B981; /* Emerald 500 */
      --accent-red: #EF4444;   /* Red 500 */
      --accent-blue: #3B82F6;  /* Blue 500 */
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-main);
      font-family: 'JetBrains Mono', monospace;
      /* STEP 1: TYPOGRAPHY UPGRADE (text-sm instead of xs) */
      font-size: 14px;
      line-height: 1.5;
      overflow-x: hidden;
    }

    /* UTILITIES */
    .glass {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
    }

    /* SCROLLBAR */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 3px; }

    /* ANIMATIONS */
    @keyframes pulse-green {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }
    .status-live { animation: pulse-green 2s infinite; }

    /* LAYOUT UTILS */
    .bento-grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 12px;
      padding: 12px;
      max-width: 1920px;
      margin: 0 auto;
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      padding: 12px;
      display: flex;
      flex-direction: column;
      border-radius: 4px;
      transition: border-color 0.2s;
    }

    /* Interactive cards hover effect */
    .card.interactive:hover {
      border-color: rgba(16, 185, 129, 0.4);
      cursor: pointer;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border-color);
    }

    .card-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    /* TOOLTIP STYLES */
    .tooltip-container { position: relative; display: inline-block; }
    .tooltip-icon { cursor: help; color: #475569; transition: color 0.2s; }
    .tooltip-icon:hover { color: var(--accent-green); }
    .tooltip-content {
      visibility: hidden;
      width: 220px;
      background-color: #0F172A;
      border: 1px solid #334155;
      color: #CBD5E1;
      text-align: left;
      border-radius: 4px;
      padding: 8px;
      position: absolute;
      z-index: 50;
      bottom: 125%;
      left: 50%;
      margin-left: -110px;
      font-size: 10px;
      opacity: 0;
      transition: opacity 0.3s;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
      text-transform: none;
      font-weight: normal;
      pointer-events: none;
    }
    .tooltip-container:hover .tooltip-content { visibility: visible; opacity: 1; }

    /* CHART FIXES */
    .chart-container {
      position: relative;
      width: 100%;
      flex: 1;
      min-height: 0; /* Crucial for flex containers */
    }
    canvas {
      width: 100% !important;
      height: 100% !important;
    }

    /* TABLE STYLES */
    .terminal-table { width: 100%; border-collapse: collapse; font-size: 12px; }
    .terminal-table th { text-align: left; color: var(--text-muted); font-weight: 600; padding-bottom: 8px; font-size: 10px; text-transform: uppercase; }
    .terminal-table td { padding: 6px 0; border-bottom: 1px solid rgba(255,255,255,0.03); }
    .terminal-table tr:last-child td { border-bottom: none; }

    /* BADGES */
    .badge { font-size: 10px; padding: 2px 6px; border-radius: 2px; font-weight: 600; }
    .badge-live { background: rgba(16, 185, 129, 0.1); color: var(--accent-green); border: 1px solid rgba(16, 185, 129, 0.2); }
    .badge-test { background: rgba(59, 130, 246, 0.1); color: var(--accent-blue); border: 1px solid rgba(59, 130, 246, 0.2); }

  </style>
</head>
<body>

  <nav class="border-b border-slate-800 bg-[#020617] sticky top-0 z-50">
    <div class="flex items-center justify-between px-4 py-3">

      <div class="flex items-center gap-8">
        <div class="flex items-center gap-3">
          <div class="w-3 h-3 bg-emerald-500 shadow-[0_0_10px_rgba(16,185,129,0.5)]"></div>
          <span class="font-bold tracking-tight text-base text-white">HYPERHUB <span class="text-[10px] text-slate-500 ml-1">v2.1</span></span>
        </div>

        <div class="hidden md:flex items-center gap-6 text-xs font-bold tracking-wider">
          <a href="#" class="text-emerald-400 border-b-2 border-emerald-500 pb-4 mb-[-17px]">DASHBOARD</a>
          <a href="#" class="text-slate-500 hover:text-white transition-colors">GOVERNANCE</a>
        </div>
      </div>

      <div class="hidden lg:flex items-center gap-6 text-xs font-mono border-x border-slate-800 px-6 h-full">
        <div class="flex gap-2 items-center">
          <span class="text-slate-400">HYPE:</span>
          <span id="ticker-hype" class="text-emerald-400 font-bold">$...</span>
        </div>
        <div class="flex gap-2 items-center">
          <span class="text-slate-400">BTC:</span>
          <span id="ticker-btc" class="text-white font-bold">$...</span>
        </div>
        <div class="flex gap-2 items-center">
          <span class="text-slate-400">ETH:</span>
          <span id="ticker-eth" class="text-white font-bold">$...</span>
        </div>
      </div>

      <div class="flex items-center gap-4 text-[10px] font-mono">
        <div class="flex items-center gap-2 px-2 py-1 bg-emerald-500/5 rounded border border-emerald-500/20">
          <span class="w-1.5 h-1.5 rounded-full bg-emerald-500 status-live"></span>
          <span class="text-emerald-400 font-bold">Ruby RPC: 12ms</span>
        </div>
      </div>
    </div>
  </nav>

  <main class="bento-grid">

    <div class="col-span-12 lg:col-span-3 flex flex-col gap-3">

      <div class="card flex-1 interactive" onclick="alert('Opening Arbitrage Detail View...')">
        <div class="card-header">
          <span class="card-title">
            AOS SCANNER
            <div class="tooltip-container">
              <span class="tooltip-icon">(?)</span>
              <div class="tooltip-content">Real-time price arbitrage opportunities between Hyperliquid and major CEXs (Binance, Bybit).</div>
            </div>
          </span>
          <span class="badge badge-live">LIVE</span>
        </div>
        <div class="overflow-auto flex-1">
          <table class="terminal-table">
            <thead><tr><th>PAIR / SOURCE</th><th class="text-right">SPREAD</th><th class="text-right">Est. PROFIT</th></tr></thead>
            <tbody>
              <tr>
                <td>
                  <div class="text-white font-bold">HYPE/USDC</div>
                  <div class="text-[10px] text-slate-500">Aster vs Hyperliquid</div>
                </td>
                <td class="text-right text-emerald-400 font-bold">0.51%</td>
                <td class="text-right text-slate-400">$125</td>
              </tr>
              <tr>
                <td>
                  <div class="text-white font-bold">BTC/USDC</div>
                  <div class="text-[10px] text-slate-500">Binance vs Hyperliquid</div>
                </td>
                <td class="text-right text-blue-400 font-bold">0.12%</td>
                <td class="text-right text-slate-400">$840</td>
              </tr>
              <tr>
                <td>
                  <div class="text-white font-bold">ETH/USDC</div>
                  <div class="text-[10px] text-slate-500">Bybit vs Hyperliquid</div>
                </td>
                <td class="text-right text-slate-500">0.02%</td>
                <td class="text-right text-slate-600">-</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card h-40 interactive">
        <div class="card-header">
          <span class="card-title">
            LST YIELDS
            <div class="tooltip-container">
              <span class="tooltip-icon">(?)</span>
              <div class="tooltip-content">Annual Percentage Yield (APY) for Liquid Staked HYPE tokens. (Simulation data)</div>
            </div>
          </span>
          <span class="badge badge-test">SIMULATION</span>
        </div>
        <div class="flex flex-col gap-2 justify-center h-full">
            <div class="flex justify-between items-center border-b border-slate-800 pb-1">
                <span class="text-white font-bold">beHYPE</span>
                <span class="text-emerald-400 font-mono">15.2% APY</span>
            </div>
            <div class="flex justify-between items-center border-b border-slate-800 pb-1">
                <span class="text-white font-bold">stHYPE</span>
                <span class="text-emerald-400 font-mono">14.8% APY</span>
            </div>
            <div class="flex justify-between items-center">
                <span class="text-white font-bold">kHYPE</span>
                <span class="text-emerald-400 font-mono">13.5% APY</span>
            </div>
        </div>
      </div>
    </div>

    <div class="col-span-12 lg:col-span-6 flex flex-col gap-3">

      <div class="card h-64 interactive" onclick="openModal('HSI Sentiment Breakdown')">
        <div class="card-header">
          <span class="card-title">
            HSI SENTIMENT INDEX
            <div class="tooltip-container">
              <span class="tooltip-icon">(?)</span>
              <div class="tooltip-content">HyperHub Sentiment Index. Composite score of Volume, Social Mentions, and Whale Accumulation.</div>
            </div>
          </span>
          <span class="text-emerald-400 font-bold text-lg">75<span class="text-slate-500 text-sm">/100</span></span>
        </div>

        <div class="flex flex-row h-full">
            <div class="w-1/3 flex flex-col justify-center border-r border-slate-800 pr-4">
                <span class="badge badge-live w-fit mb-2">BULLISH</span>
                <p class="text-xs text-slate-400 leading-relaxed">
                    High whale accumulation detected in last 4h. Social volume spike on X/Twitter.
                </p>
                <div class="mt-4 text-[10px] text-slate-600">Updated: 2m ago</div>
            </div>

            <div class="w-2/3 chart-container relative pl-4">
                <canvas id="hsiRadar"></canvas>
            </div>
        </div>
      </div>

      <div class="card flex-1 interactive" onclick="openModal('Squeeze Radar Detail')">
        <div class="card-header">
          <span class="card-title">
            SQUEEZE RADAR <span class="badge badge-red ml-2 bg-red-500/10 text-red-400 border-red-500/20">HIGH RISK</span>
            <div class="tooltip-container">
              <span class="tooltip-icon ml-1">(?)</span>
              <div class="tooltip-content">Identifies price levels with high potential for short/long squeezes based on funding rates.</div>
            </div>
          </span>
          <div class="flex gap-3 text-[10px] text-slate-500">
            <span class="text-emerald-400">● Price</span>
            <span class="text-red-500">● Funding</span>
          </div>
        </div>
        <div class="chart-container">
          <canvas id="squeezeChart"></canvas>
        </div>
      </div>
    </div>

    <div class="col-span-12 lg:col-span-3 flex flex-col gap-3">

      <div class="card flex-[1.5]">
        <div class="card-header">
          <span class="card-title">
            WHALE WATCH v3
            <div class="tooltip-container">
              <span class="tooltip-icon">(?)</span>
              <div class="tooltip-content">Net Inflow/Outflow by wallet size over the last 24h. Green = Accumulating.</div>
            </div>
          </span>
          <span class="text-[10px] text-slate-500 font-mono">(SIMULATION)</span>
        </div>

        <div class="flex-1 overflow-auto">
          <table class="terminal-table">
            <thead>
                <tr>
                    <th>TIER</th>
                    <th class="text-center">NET FLOW (24h)</th>
                    <th class="text-right">VALUE</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="text-purple-400 font-bold text-xs">WHALE</td>
                    <td class="px-2">
                        <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full bg-emerald-500 w-[80%]"></div>
                        </div>
                    </td>
                    <td class="text-right text-emerald-400 font-mono">+$1.2M</td>
                </tr>
                <tr>
                    <td class="text-blue-400 font-bold text-xs">SHARK</td>
                    <td class="px-2">
                        <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full bg-emerald-500 w-[60%]"></div>
                        </div>
                    </td>
                    <td class="text-right text-emerald-400 font-mono">+$450K</td>
                </tr>
                <tr>
                    <td class="text-cyan-400 font-bold text-xs">DOLPHIN</td>
                    <td class="px-2">
                        <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full bg-red-500 w-[30%]"></div>
                        </div>
                    </td>
                    <td class="text-right text-red-400 font-mono">-$120K</td>
                </tr>
                <tr>
                    <td class="text-slate-300 font-bold text-xs">FISH</td>
                    <td class="px-2">
                        <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full bg-slate-600 w-[10%]"></div>
                        </div>
                    </td>
                    <td class="text-right text-slate-400 font-mono">+$10K</td>
                </tr>
                 <tr>
                    <td class="text-slate-500 font-bold text-xs">PLANKTON</td>
                    <td class="px-2">
                        <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
                            <div class="h-full bg-red-500 w-[60%]"></div>
                        </div>
                    </td>
                    <td class="text-right text-red-400 font-mono">-$55K</td>
                </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card flex-1">
        <div class="card-header">
          <span class="card-title">ALPHA FEED</span>
        </div>
        <div class="overflow-auto text-[11px] space-y-3 pr-1">
          <div class="pl-2 border-l-2 border-slate-700 hover:border-emerald-500 transition-colors cursor-pointer">
            <div class="text-slate-200 font-medium">HIP-3 Inflation Vote ends in 2d</div>
            <div class="text-[10px] text-slate-500 mt-0.5">Governance · 90% Aye</div>
          </div>
          <div class="pl-2 border-l-2 border-slate-700 hover:border-emerald-500 transition-colors cursor-pointer">
            <div class="text-slate-200 font-medium">Aster Bridge Upgrade v2.3</div>
            <div class="text-[10px] text-slate-500 mt-0.5">Official Docs · 2h ago</div>
          </div>
          <div class="pl-2 border-l-2 border-slate-700 hover:border-emerald-500 transition-colors cursor-pointer">
            <div class="text-slate-200 font-medium">OI hits new All Time High</div>
            <div class="text-[10px] text-slate-500 mt-0.5">Analytics · 5h ago</div>
          </div>
        </div>
      </div>

    </div>
  </main>

  <div id="chartModal" class="hidden fixed inset-0 z-[100] bg-black/90 backdrop-blur-sm flex items-center justify-center p-4">
    <div class="glass w-full max-w-3xl h-[500px] p-6 relative flex flex-col bg-[#0B1221] rounded-lg border border-slate-700 shadow-2xl">
      <div class="flex justify-between items-center mb-4">
          <h2 id="modalTitle" class="text-xl font-bold text-white tracking-tight">CHART DETAIL</h2>
          <button onclick="closeModal()" class="text-slate-400 hover:text-red-500 transition-colors text-2xl">&times;</button>
      </div>
      <div class="flex-1 relative bg-[#020617] rounded border border-slate-800 p-2">
        <div class="flex items-center justify-center h-full text-slate-500 font-mono">
            [ Detailed Interactive Chart View Placeholder ]
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- STEP 6: LIVE DATA CONNECTION (Hyperliquid API) ---
    async function updateTickerPrices() {
        try {
            // Using standard public post endpoint for metadata
            const response = await fetch('https://api.hyperliquid.xyz/info', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ "type": "metaAndAssetCtxs" })
            });

            if (!response.ok) throw new Error('API Error');
            const data = await response.json();
            const assets = data[0].universe;
            const ctxs = data[1];

            // Helper to find price by coin name
            const getPrice = (name) => {
                const index = assets.findIndex(a => a.name === name);
                if (index !== -1) {
                    return parseFloat(ctxs[index].markPx).toFixed(2);
                }
                return "---";
            };

            // Update DOM
            const hypePrice = getPrice('HYPE');
            const btcPrice = getPrice('BTC');
            const ethPrice = getPrice('ETH');

            if(hypePrice !== "---") document.getElementById('ticker-hype').innerText = `$${hypePrice}`;
            if(btcPrice !== "---") document.getElementById('ticker-btc').innerText = `$${btcPrice}`;
            if(ethPrice !== "---") document.getElementById('ticker-eth').innerText = `$${ethPrice}`;

        } catch (err) {
            console.log("Ticker update failed (using fallback/offline mode):", err);
        }
    }

    // Run immediately and then every 10 seconds
    updateTickerPrices();
    setInterval(updateTickerPrices, 10000);


    // --- CHART CONFIGURATION ---
    const theme = {
      green: '#10B981',
      red: '#EF4444',
      blue: '#3B82F6',
      muted: 'rgba(148, 163, 184, 0.2)',
      text: '#64748B'
    };

    Chart.defaults.color = theme.text;
    Chart.defaults.borderColor = theme.muted;
    Chart.defaults.font.family = "'JetBrains Mono', monospace";
    Chart.defaults.font.size = 11;
    Chart.defaults.plugins.tooltip.backgroundColor = '#0F172A';
    Chart.defaults.plugins.tooltip.borderColor = '#334155';
    Chart.defaults.plugins.tooltip.borderWidth = 1;
    Chart.defaults.plugins.tooltip.titleColor = '#F8FAFC';

    // 1. HSI RADAR
    new Chart(document.getElementById('hsiRadar'), {
      type: 'radar',
      data: {
        labels: ['SOC', 'WHL', 'OI', 'FND', 'VOL'],
        datasets: [{
          label: 'Current Score',
          data: [80, 70, 65, 55, 85],
          backgroundColor: 'rgba(16, 185, 129, 0.2)',
          borderColor: theme.green,
          borderWidth: 2,
          pointBackgroundColor: theme.green,
          pointRadius: 2
        }]
      },
      options: {
        maintainAspectRatio: false,
        plugins: { legend: { display: false } },
        scales: {
          r: {
            grid: { color: 'rgba(255,255,255,0.05)' },
            angleLines: { color: 'rgba(255,255,255,0.05)' },
            ticks: { display: false },
            pointLabels: { font: { size: 10 }, color: '#94A3B8' }
          }
        }
      }
    });

    // 2. SQUEEZE RADAR
    new Chart(document.getElementById('squeezeChart'), {
      type: 'line',
      data: {
        labels: ['00:00', '04:00', '08:00', '12:00', '16:00', '20:00', 'Now'],
        datasets: [
          {
            label: 'Price',
            data: [28, 29, 28.5, 27, 28, 30, 31],
            borderColor: theme.green,
            borderWidth: 2,
            tension: 0.4,
            pointRadius: 0,
            yAxisID: 'y'
          },
          {
            label: 'Funding Rate',
            type: 'bar',
            data: [0.01, 0.03, -0.02, -0.05, 0.02, 0.04, 0.01],
            backgroundColor: (ctx) => ctx.raw >= 0 ? 'rgba(16, 185, 129, 0.5)' : 'rgba(239, 68, 68, 0.5)',
            yAxisID: 'y1',
            barThickness: 8
          }
        ]
      },
      options: {
        maintainAspectRatio: false,
        interaction: { mode: 'index', intersect: false },
        plugins: { legend: { display: false } },
        scales: {
          x: { grid: { display: false } },
          y: { display: false },
          y1: { display: false, position: 'right', grid: { display: false } }
        }
      }
    });

    // MODAL LOGIC
    function openModal(title) {
      document.getElementById('modalTitle').innerText = title;
      document.getElementById('chartModal').classList.remove('hidden');
    }

    function closeModal() {
      document.getElementById('chartModal').classList.add('hidden');
    }

    // Close modal on click outside
    document.getElementById('chartModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal();
    });
  </script>
</body>
</html>
